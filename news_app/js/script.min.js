"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,s=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function toTop(){var e=document.querySelector(".to-top");window.addEventListener("scroll",(function(){(window.pageYOffset||document.documentElement.scrollTop)>300?e.classList.add("to-top-active"):e.classList.remove("to-top-active")})),e.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))}function burgerMenu(){var e=document.querySelector(".header__menu_icon"),t=e.querySelectorAll("span"),n=document.querySelector("body"),r=document.querySelector(".sidebar");r.addEventListener("click",(function(e){"text"!=e.target.type&&(r.classList.remove("active"),n.classList.remove("blocked"),t.forEach((function(e){return e.classList.remove("active-burger")})))})),e.addEventListener("click",(function(){r.classList.contains("active")?(r.classList.remove("active"),n.classList.remove("blocked"),t.forEach((function(e){return e.classList.remove("active-burger")}))):(r.classList.add("active"),t.forEach((function(e){return e.classList.add("active-burger")})),n.classList.add("blocked"))})),window.addEventListener("resize",(function(){window.innerWidth>768&&(r.classList.remove("active"),n.classList.remove("blocked"),t.forEach((function(e){return e.classList.remove("active-burger")})))}))}function customHttp(){return{get:function(e,t){try{var n=new XMLHttpRequest;n.open("GET",e),n.addEventListener("load",(function(){if(2===Math.floor(n.status/100)){var e=JSON.parse(n.responseText);t(null,e)}else t("Error. Status code: ".concat(n.status),n)})),n.addEventListener("error",(function(){t("Error. Status code: ".concat(n.status),n)})),n.send()}catch(e){t(e)}},post:function(e,t,n,r){try{var o=new XMLHttpRequest;o.open("POST",e),o.addEventListener("load",(function(){if(2===Math.floor(o.status/100)){var e=JSON.parse(o.responseText);r(null,e)}else r("Error. Status code: ".concat(o.status),o)})),o.addEventListener("error",(function(){r("Error. Status code: ".concat(o.status),o)})),n&&Object.entries(n).forEach((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.setRequestHeader(n,r)})),o.send(JSON.stringify(t))}catch(e){r(e)}}}}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),toTop(),burgerMenu();var http=customHttp(),newsServises=function(){var e="2b42882da9104afca4664c625f9a57ac",t="https://newsapi.org/v2";return{topHeadlines:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ua",r=arguments.length>1?arguments[1]:void 0;http.get("".concat(t,"/top-headlines?country=").concat(n,"&category=technology&apiKey=").concat(e),r)},everything:function(n,r){http.get("".concat(t,"/everything?q=").concat(n,"&apiKey=").concat(e),r)}}}(),form=document.querySelector(".sidebar__form"),ul=document.querySelector(".sidebar__ul"),countrySelect=Array.from(document.querySelectorAll(".sidebar__country")),searchInput=document.querySelector(".sidebar__input"),cardsContainer=document.querySelector(".news");function inputOnFocus(){searchInput.addEventListener("focus",(function(){document.querySelector(".input_before").classList.add("input_active")})),searchInput.addEventListener("focusout",(function(){searchInput.value.length&&!searchInput.value.includes(" ")||(document.querySelector(".input_before").classList.remove("input_active"),form.reset()),window.offsetWidth<=768&&(console.log(window.offsetWidth),document.querySelector(".input_before").classList.remove("input_active"),form.reset())}))}function loadNews(){countrySelect.forEach((function(t){t.classList.contains("selected")&&(e=t.getAttribute("data-country"),inputOnFocus())}));var e,t=searchInput.value;showPreloader(),t?newsServises.everything(t,onGetResponse):newsServises.topHeadlines(e,onGetResponse)}function onGetResponse(e,t){if(removePreloader(),e)return showAlert(e,"alert"),void errorMessage(e);t.articles.length||errorMessage("there is not news"),renderNews(t.articles)}function showAlert(){console.log("hello pidr")}function renderNews(e){cardsContainer.children.length&&clearContainer(cardsContainer);var t="";e.forEach((function(e){var n=renderNewsItem(e);t+=n})),cardsContainer.insertAdjacentHTML("afterbegin",t)}function renderNewsItem(e){var t=e.urlToImage,n=e.title,r=e.url,o=e.description||"More info in a link";return'\n  <div class="news__card">\n            <div class="news__card_img_wrapper _ibg">\n                <img src="'.concat(t||"../img/not-found.png",'" alt="img">\n                <div class="news__card_title">').concat(n.slice(0,120),'...</div>\n            </div>\n            <div class="news__card_description">\n            <div>').concat(o.slice(0,200),"...</div>\n            </div>\n            <div class='news__link_wrapper'>\n              <a href=\"").concat(r,'" target=\'_blank\' class="news__card_link">Read more</a>\n            </div>\n        </div>\n  ')}function clearContainer(e){for(var t=e.lastElementChild;t;)e.removeChild(t),t=e.lastElementChild}function showPreloader(){document.querySelector(".header").insertAdjacentHTML("beforeend","<div class='progress'>\n      <span></span>\n      <span></span>\n      <span></span>\n    </div>\n    ")}function removePreloader(){var e=document.body.querySelector(".progress");e&&e.remove()}function errorMessage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"isnt found news";clearContainer(cardsContainer),cardsContainer.insertAdjacentHTML("afterbegin","<div class='error'>\n      <h1>".concat(e,"</h1>\n    </div>\n    "))}inputOnFocus(),countrySelect.forEach((function(e,t){e.addEventListener("click",(function(e){countrySelect.forEach((function(e){e.classList.remove("selected")}));var t=e.target;t.classList.contains("selected")||(t.classList.add("selected"),loadNews(),form.reset(),document.querySelector(".input_before").classList.remove("input_active"))}))})),form.addEventListener("submit",(function(e){e.preventDefault(),window.offsetWidth<=768&&(console.log(window.offsetWidth),document.querySelector(".input_before").classList.remove("input_active"),form.reset()),inputOnFocus(),loadNews()})),document.addEventListener("DOMContentLoaded",(function(){loadNews()}));