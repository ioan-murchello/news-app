"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,s,c=[],i=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function getCurrentYear(){var e=(new Date).getFullYear();document.getElementById("year").textContent=e}function toTop(){var e=document.querySelector(".to-top");window.addEventListener("scroll",(function(){(window.pageYOffset||document.documentElement.scrollTop)>300?e.classList.add("to-top-active"):e.classList.remove("to-top-active")})),e.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))}function burgerMenu(){var e=document.querySelector(".header__menu_icon"),t=e.querySelectorAll("span"),r=document.querySelector("body"),n=document.querySelector(".sidebar");n.addEventListener("click",(function(e){"text"!=e.target.type&&(n.classList.remove("active"),r.classList.remove("blocked"),t.forEach((function(e){return e.classList.remove("active-burger")})))})),e.addEventListener("click",(function(){n.classList.contains("active")?(n.classList.remove("active"),r.classList.remove("blocked"),t.forEach((function(e){return e.classList.remove("active-burger")}))):(n.classList.add("active"),t.forEach((function(e){return e.classList.add("active-burger")})),r.classList.add("blocked"))})),window.addEventListener("resize",(function(){window.innerWidth>768&&(n.classList.remove("active"),r.classList.remove("blocked"),t.forEach((function(e){return e.classList.remove("active-burger")})))}))}function customHttp(){return{get:function(e,t){try{var r=new XMLHttpRequest;r.open("GET",e),r.addEventListener("load",(function(){if(2===Math.floor(r.status/100)){var e=JSON.parse(r.responseText);t(null,e)}else t(r.status,r)})),r.addEventListener("error",(function(){t(r.status,r)})),r.send()}catch(e){t(e)}},post:function(e,t,r,n){try{var o=new XMLHttpRequest;o.open("POST",e),o.addEventListener("load",(function(){if(2===Math.floor(o.status/100)){var e=JSON.parse(o.responseText);n(null,e)}else n("Error. Status code: ".concat(o.status),o)})),o.addEventListener("error",(function(){n("Error. Status code: ".concat(o.status),o)})),r&&Object.entries(r).forEach((function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];o.setRequestHeader(r,n)})),o.send(JSON.stringify(t))}catch(e){n(e)}}}}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),getCurrentYear(),toTop(),burgerMenu();var http=customHttp(),newsServises=function(){var e="5206bc0262c64c35b62a4c815313f6f8",t="https://newsapi.org/v2";return{topHeadlines:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ua",n=arguments.length>1?arguments[1]:void 0;http.get("".concat(t,"/top-headlines?country=").concat(r,"&category=technology&apiKey=").concat(e),n)},everything:function(r,n){var o=r.trimStart().replaceAll(/[<]/gi,"&#60;");http.get("".concat(t,"/everything?q=").concat(o,"&apiKey=").concat(e),n)}}}(),form=document.querySelector(".sidebar__form"),ul=document.querySelector(".sidebar__ul"),countrySelect=Array.from(document.querySelectorAll(".sidebar__country")),searchInput=document.querySelector(".sidebar__input"),cardsContainer=document.querySelector(".news"),inputBefore=document.querySelector(".input_before");function inputOnFocus(){searchInput.addEventListener("focus",(function(){document.querySelector(".input_before").classList.add("input_active")})),searchInput.addEventListener("focusout",(function(){searchInput.value=searchInput.value.trimStart(),searchInput.value.length||(inputBefore.classList.remove("input_active"),form.reset())}))}function loadNews(){countrySelect.forEach((function(t){t.classList.contains("selected")&&(e=t.getAttribute("data-country"),inputOnFocus())}));var e,t=searchInput.value.replaceAll(/[<]/gi,"&#60;");showPreloader(),t?newsServises.everything(t,onGetResponse):newsServises.topHeadlines(e,onGetResponse)}function onGetResponse(e,t){if(removePreloader(),e){if(401==e)return void errorMessage("Status code ".concat(e),"<br>unfortunately you can't use this expression or this symbol '<'");if(426==e)return void errorMessage("Status code ".concat(e),'<br> This site uses a free news api "NewsApi.org", if you see this message, unfortunately for today already been used all requests for news, please be patient and try again tomorrow')}t.articles.length||(clearContainer(cardsContainer),errorMessage(searchInput.value," not found")),renderNews(t.articles)}function showAlert(e){alert(e)}function renderNews(e){var t="";e.forEach((function(e){var r=renderNewsItem(e);t+=r})),cardsContainer.insertAdjacentHTML("afterbegin",t)}function renderNewsItem(e){var t=e.urlToImage,r=e.title,n=e.url,o=e.description||"More info in a link";return'\n  <div class="news__card">\n    <div class="news__card_img_wrapper _ibg">\n      <img src="'.concat(t||"../img/not-found.png",'" alt="img">\n      <div class="news__card_title">').concat(r.slice(0,120),'...</div>\n    </div>\n    <div class="news__card_description">\n      <div>').concat(o.slice(0,200),"...</div>\n    </div>\n    <div class='news__link_wrapper'>\n      <a href=\"").concat(n,'" target=\'_blank\' class="news__card_link">Read more</a>\n    </div>\n  </div>\n  ')}function clearContainer(e){for(var t=e.lastElementChild;t;)e.removeChild(t),t=e.lastElementChild}function showPreloader(){document.querySelector(".contr_wrapper").insertAdjacentHTML("afterbegin","<div class='progress'>\n      <span></span>\n      <span></span>\n      <span></span>\n   </div>")}function removePreloader(){var e=document.body.querySelector(".progress");e&&e.remove()}function errorMessage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'"Nothing was not found"',t=arguments.length>1?arguments[1]:void 0;return clearContainer(cardsContainer),cardsContainer.insertAdjacentHTML("afterbegin","<div class='error'>\n      <div class='error_info'>/".concat(e,"/<span>").concat(t,"</span></div>\n    </div>\n    "))}inputOnFocus(),countrySelect.forEach((function(e){e.addEventListener("click",(function(e){clearContainer(cardsContainer),countrySelect.forEach((function(e){e.classList.remove("selected")}));var t=e.target;t.classList.contains("selected")||(t.classList.add("selected"),form.reset(),inputBefore.classList.remove("input_active"),loadNews())}))})),form.addEventListener("submit",(function(e){e.preventDefault(),searchInput.value&&(window.offsetWidth<=768&&(console.log("jaaaa"),inputBefore.classList.remove("input_active"),form.reset()),inputOnFocus(),loadNews())})),document.addEventListener("DOMContentLoaded",(function(){loadNews()}));